(()=>{"use strict";var e;!function(e){let t=!1;window.addEventListener("DOMContentLoaded",()=>t=!0),e.onceDOMContentLoaded=function(){return t?Promise.resolve():new Promise(e=>{window.addEventListener("DOMContentLoaded",()=>e(),{once:!0})})};class n extends Error{constructor(e){super(`No element with ID "${e}"`)}}e.NoSuchIdError=n,e.getElementById=function(e,t){const r=document.getElementById(e);if(null===r)throw new n(e);if(!(r instanceof t))throw new TypeError(`Element with ID "${e}" is not a ${t.name}, was "${r.constructor.name}" instead`);return r}}(e||(e={}));const t=e;var n;!function(e){let n;!function(e){e.MOBILE_SLIM="mobile-slim",e.MOBILE="mobile",e.TABLET="tablet",e.DESKTOP="desktop",e.DESKTOP_WIDE="desktop-wide"}(n=e.Viewport||(e.Viewport={}));const r={[n.DESKTOP_WIDE]:{width:16,height:9},[n.DESKTOP]:{width:4,height:3},[n.TABLET]:{width:3,height:4},[n.MOBILE]:{width:9,height:16},[n.MOBILE_SLIM]:{width:9,height:22}},o=new Set;e.onViewportChanged=function(e){o.add(e)},t.onceDOMContentLoaded().then(()=>{window.addEventListener("resize",()=>{const e=Object.values(n).find(e=>{const{width:t,height:n}=r[e];return matchMedia(`(max-aspect-ratio: ${t} / ${n})`).matches})??n.DESKTOP_WIDE;document.body.setAttribute("viewport",e),o.forEach(t=>t(e))}),window.dispatchEvent(new Event("resize"))});const a=matchMedia("(hover: hover)");e.canHover=function(){return a.matches};const i=new Set;let s;e.onHoverChanged=function(e){i.add(e)},t.onceDOMContentLoaded().then(()=>{document.body.toggleAttribute("hover",a.matches),a.addEventListener("change",e=>{document.body.toggleAttribute("can-hover",e.matches),i.forEach(t=>t(e.matches))})}),function(e){e.NONE="none",e.COARSE="coarse",e.FINE="fine"}(s=e.PointerAccuracy||(e.PointerAccuracy={}));const c={[s.NONE]:matchMedia("(pointer: none)"),[s.COARSE]:matchMedia("(pointer: coarse)"),[s.FINE]:matchMedia("(pointer: fine)")};e.pointerAccuracy=function(){return Object.values(s).find(e=>c[e].matches)??s.NONE};const l=new Set;e.onPointerChanged=function(e){l.add(e)},t.onceDOMContentLoaded().then(()=>Object.values(s).forEach(e=>{const t=c[e];t.matches&&document.body.setAttribute("pointer",e),t.addEventListener("change",t=>{t.matches&&(document.body.setAttribute("pointer",e),l.forEach(t=>t(e)))})}))}(n||(n={}));const r=n;var o;!function(e){e.DEFAULT_LIGHT="default-light",e.DEFAULT_DARK="default-dark",e.PLANT="plant",e.SARDINE="sardine",e.FILMSTRIP="filmstrip",e.HEART="heart"}(o||(o={}));const a=[o.DEFAULT_LIGHT,o.DEFAULT_DARK,o.PLANT,o.SARDINE,o.FILMSTRIP,o.HEART],i=o.DEFAULT_LIGHT;function s(e){return Object.values(o).some(t=>e===t)}!function(e){const n="palette";function r(){const e=localStorage.getItem(n);return s(e)?e:i}function o(e){localStorage.setItem(n,e),t.onceDOMContentLoaded().then(()=>{document.body.setAttribute("palette",e)})}e.get=r,e.set=o,e.setNext=function(){const e=a.indexOf(r()),t=a[(e+1)%a.length];return o(t),t};const c=localStorage.getItem(n);s(c)?o(c):matchMedia("(prefers-color-scheme: light)").matches?o(e.DEFAULT_LIGHT):matchMedia("(prefers-color-scheme: dark)").matches?o(e.DEFAULT_DARK):o(i)}(o||(o={}));const c=o;class l{name;constructor(e){this.name=e}array(){return new g(this)}}var h;!function(e){e.STRING="string",e.NUMBER="number",e.BOOLEAN="boolean"}(h||(h={}));class u extends l{primitive;constructor(e){super(e),this.primitive=e}extends(e){return e instanceof u&&e.primitive===this.primitive}isAssignable(e){return typeof e===this.primitive}}const w=new u(h.STRING),p=new u(h.NUMBER),d=new u(h.BOOLEAN);class g extends l{elementType;constructor(e){super(e.name+"[]"),this.elementType=e}extends(e){return e instanceof g&&this.elementType.extends(e.elementType)}isAssignable(e){return Array.isArray(e)&&e.every(e=>this.elementType.isAssignable(e))}}const f=w.array(),m=p.array(),y=d.array(),E=f.array(),b=m.array(),T=y.array();function v(e){if(Array.isArray(e)){if(0===e.length)return!0;{const t=typeof e[0];for(let n=0;n<e.length;n++){const r=e[n];if(!v(r)||typeof r!==t)return!1}return!0}}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function S(e){switch(typeof e){case"string":return w;case"number":return p;case"boolean":return d;case"object":if(null!==e&&Array.isArray(e)){if(0===e.length)throw new TypeError("cannot find type of zero-length array");return S(e[0]).array()}default:throw new TypeError(`could not find type of value ${JSON.stringify(e)}`)}}class M{stringVars={};numberVars={};booleanVars={};setStringVar(e,t){this.stringVars[e]=t}getStringVar(e,t){const n=this.stringVars[e]??t;if(void 0===n)throw new ReferenceError(`undefined string variable "${e}"`);return n}setNumberVar(e,t){this.numberVars[e]=t}getNumberVar(e,t){const n=this.numberVars[e]??t;if(void 0===n)throw new ReferenceError(`undefined string variable "${e}"`);return n}setBooleanVar(e,t){this.booleanVars[e]=t}getBooleanVar(e,t){const n=this.booleanVars[e]??t;if(void 0===n)throw new ReferenceError(`undefined string variable "${e}"`);return n}copy(){const e=new M;for(const t in this.stringVars)e.setStringVar(t,this.stringVars[t]);for(const t in this.numberVars)e.setNumberVar(t,this.numberVars[t]);for(const t in this.booleanVars)e.setBooleanVar(t,this.booleanVars[t]);return e}static fromVars(e){const t=new M;for(const n in e){const r=e[n];"string"==typeof r&&t.setStringVar(n,r),"number"==typeof r&&t.setNumberVar(n,r),"boolean"==typeof r&&t.setBooleanVar(n,r)}return t}}class x{argTypes;returnType;apply;constructor(e,t,n){this.argTypes=e,this.returnType=t,this.apply=n}}class A extends x{constructor(e,t){super([],e,t)}chain(e){return new A(e.returnType,t=>e.apply(t,this.apply(t)))}chainLHS(e){return new D(e.rhsType,e.returnType,(t,n)=>e.apply(t,this.apply(t),n))}chainRHS(e){return new D(e.lhsType,e.returnType,(t,n)=>e.apply(t,n,this.apply(t)))}static literal(e){return new A(S(e),()=>e)}}class D extends x{get argType(){return this.argTypes[0]}constructor(e,t,n){super([e],t,n)}chain(e){return new D(this.argType,e.returnType,(t,n)=>e.apply(t,this.apply(t,n)))}chainLHS(e){return new L(this.argType,e.rhsType,e.returnType,(t,n,r)=>e.apply(t,this.apply(t,n),r))}chainRHS(e){return new L(e.lhsType,this.argType,e.returnType,(t,n,r)=>e.apply(t,n,this.apply(t,r)))}}class L extends x{get lhsType(){return this.argTypes[0]}get rhsType(){return this.argTypes[1]}isCommutative;constructor(e,t,n,r,o=!1){super([e,t],n,r),this.isCommutative=o}chain(e){return new L(this.lhsType,this.rhsType,e.returnType,(t,n,r)=>e.apply(t,this.apply(t,n,r)))}}class I extends x{get aType(){return this.argTypes[0]}get bType(){return this.argTypes[1]}get cType(){return this.argTypes[2]}constructor(e,t,n,r,o){super([e,t,n],r,o)}chain(e){return new I(this.aType,this.bType,this.cType,e.returnType,(t,n,r,o)=>e.apply(t,this.apply(t,n,r,o)))}}var N;!function(e){e.pick=function(e){return e[Math.floor(Math.random()*e.length)]}}(N||(N={}));const R=N;class O{name;providers;constructor(e,...t){this.name=e,this.providers=t}findImpl(e){for(const t of this.providers)if(e.extends(t.argType))return t;throw new TypeError(`no ${this.name} implementation found for ${e.name} argument type`)}}class C{name;providers;constructor(e,...t){this.name=e,this.providers=t}findImpl(e,t){for(const n of this.providers){if(e.extends(n.lhsType)&&t.extends(n.rhsType))return n;if(n.isCommutative&&e.extends(n.rhsType)&&t.extends(n.lhsType))return new L(n.rhsType,n.lhsType,n.returnType,(e,t,r)=>n.apply(e,r,t))}throw new TypeError(`no ${this.name} implementation found for (${e.name}, ${t.name}) argument types`)}}const V={"random number":new A(p,Math.random),"random boolean":new A(d,()=>Math.random()<=.5),timestamp:new A(p,Date.now),year:new A(p,()=>(new Date).getFullYear()),month:new A(p,()=>(new Date).getMonth()+1),day:new A(p,()=>(new Date).getDate()),hours:new A(p,()=>(new Date).getHours()),minutes:new A(p,()=>(new Date).getMinutes()),seconds:new A(p,()=>(new Date).getSeconds()),milliseconds:new A(p,()=>(new Date).getMilliseconds())},$={negate:new O("negate",new D(d,d,(e,t)=>!t),new D(p,p,(e,t)=>-t)),invert:new O("invert",new D(p,p,(e,t)=>{if(0===t)throw new RangeError(`cannot take multiplicative inverse of ${t}`);return 1/t})),signum:new O("signum",new D(p,p,(e,t)=>Math.sign(t))),length:new O("length",new D(w,p,(e,t)=>t.length),new D(f,p,(e,t)=>t.length),new D(m,p,(e,t)=>t.length),new D(y,p,(e,t)=>t.length)),square:new O("square",new D(p,p,(e,t)=>t**2)),sqrt:new O("square root",new D(p,p,(e,t)=>{if(t<0)throw new RangeError(`cannot take square root of ${t}`);return Math.sqrt(t)})),cube:new O("cube",new D(p,p,(e,t)=>t**3)),"cube root":new O("cube root",new D(p,p,(e,t)=>{if(t<0)throw new RangeError(`cannot take cube root of ${t}`);return Math.cbrt(t)})),exp:new O("exp",new D(p,p,(e,t)=>Math.exp(t))),exp2:new O("exp2",new D(p,p,(e,t)=>2**t)),exp10:new O("exp10",new D(p,p,(e,t)=>10**t)),log:new O("log",new D(p,p,(e,t)=>{if(t<=0)throw new RangeError(`cannot take log of ${t}`);return Math.log(t)})),log2:new O("log2",new D(p,p,(e,t)=>{if(t<=0)throw new RangeError(`cannot take log2 of ${t}`);return Math.log2(t)})),log10:new O("log10",new D(p,p,(e,t)=>{if(t<=0)throw new RangeError(`cannot take log10 of ${t}`);return Math.log10(t)})),round:new O("round",new D(p,p,(e,t)=>Math.round(t))),floor:new O("floor",new D(p,p,(e,t)=>Math.floor(t))),ceil:new O("ceil",new D(p,p,(e,t)=>Math.ceil(t))),cos:new O("cos",new D(p,p,(e,t)=>Math.cos(t))),sin:new O("sin",new D(p,p,(e,t)=>Math.sin(t))),tan:new O("tan",new D(p,p,(e,t)=>Math.tan(t))),"deg to rad":new O("deg to rad",new D(p,p,(e,t)=>t/360*2*Math.PI)),"rad to deg":new O("rad to deg",new D(p,p,(e,t)=>t/2/Math.PI*360)),pick:new O("pick",new D(f,w,(e,t)=>R.pick(t)),new D(y,d,(e,t)=>R.pick(t)),new D(m,p,(e,t)=>R.pick(t))),shuffle:new O("shuffle",new D(f,f,(e,t)=>t.toSorted(()=>Math.random()-.5)),new D(m,m,(e,t)=>t.toSorted(()=>Math.random()-.5)),new D(y,y,(e,t)=>t.toSorted(()=>Math.random()-.5))),lowercase:new O("lowercase",new D(w,w,(e,t)=>t.toLocaleLowerCase())),uppercase:new O("uppercase",new D(w,w,(e,t)=>t.toLocaleUpperCase())),capitalize:new O("capitalize",new D(w,w,(e,t)=>t.charAt(0).toLocaleUpperCase()+t.substring(1))),"capitalize all":new O("capitalize all",new D(w,w,(e,t)=>t.split(" ").map(e=>e.charAt(0).toLocaleUpperCase()+e.substring(1)).join(" "))),split:new O("split",new D(w,f,(e,t)=>t.split(" "))),join:new O("join",new D(f,w,(e,t)=>t.join(" "))),reverse:new O("reverse",new D(w,w,(e,t)=>t.split("").reverse().join("")),new D(f,f,(e,t)=>t.reverse()),new D(m,m,(e,t)=>t.reverse()),new D(y,y,(e,t)=>t.reverse())),list:new O("list",new D(w,f,(e,t)=>[t]),new D(p,m,(e,t)=>[t]),new D(d,y,(e,t)=>[t])),sort:new O("sort",new D(f,f,(e,t)=>t.toSorted()),new D(m,m,(e,t)=>t.toSorted((e,t)=>e-t)),new D(y,y,(e,t)=>t.toSorted())),head:new O("head",new D(w,w,(e,t)=>t.charAt(0)),new D(f,w,(e,t)=>{if(0===t.length)throw new RangeError("empty string array");return t[0]}),new D(m,p,(e,t)=>{if(0===t.length)throw new RangeError("empty number array");return t[0]}),new D(y,d,(e,t)=>{if(0===t.length)throw new RangeError("empty boolean array");return t[0]})),last:new O("last",new D(w,w,(e,t)=>t.charAt(t.length-1)),new D(f,w,(e,t)=>{if(0===t.length)throw new RangeError("empty string array");return t[t.length-1]}),new D(m,p,(e,t)=>{if(0===t.length)throw new RangeError("empty number array");return t[t.length-1]}),new D(y,d,(e,t)=>{if(0===t.length)throw new RangeError("empty boolean array");return t[t.length-1]})),init:new O("init",new D(w,w,(e,t)=>t.slice(1)),new D(f,f,(e,t)=>t.slice(1)),new D(m,m,(e,t)=>t.slice(1)),new D(y,y,(e,t)=>t.slice(1))),tail:new O("tail",new D(w,w,(e,t)=>t.slice(0,-1)),new D(f,f,(e,t)=>t.slice(0,-1)),new D(m,m,(e,t)=>t.slice(0,-1)),new D(y,y,(e,t)=>t.slice(0,-1))),"to string":new O("to string",new D(w,w,(e,t)=>t),new D(p,w,(e,t)=>t.toString()),new D(d,w,(e,t)=>t.toString())),"to number":new O("to number",new D(w,p,(e,t)=>{const n=Number(t);if(isNaN(n))throw new SyntaxError(`invalid number format ${JSON.stringify(t)}`);return n}),new D(p,p,(e,t)=>t),new D(d,p,(e,t)=>t?1:0)),"to boolean":new O("to boolean",new D(w,d,(e,t)=>!!t),new D(p,d,(e,t)=>!!t),new D(d,d,(e,t)=>t)),"string variable":new O("string variable",new D(w,w,(e,t)=>{const n=e.getStringVar(t);if(void 0===n)throw new ReferenceError(`no string variable named ${JSON.stringify(t)}`);return n})),"number variable":new O("number variable",new D(w,p,(e,t)=>{const n=e.getNumberVar(t);if(void 0===n)throw new ReferenceError(`no string variable named ${JSON.stringify(t)}`);return n})),"boolean variable":new O("boolean variable",new D(w,d,(e,t)=>{const n=e.getBooleanVar(t);if(void 0===n)throw new ReferenceError(`no string variable named ${JSON.stringify(t)}`);return n}))},k={add:new C("add",new L(w,w,w,(e,t,n)=>t+n,!1),new L(p,p,p,(e,t,n)=>t+n,!0),new L(d,d,d,(e,t,n)=>t||n,!0),new L(d,p,p,(e,t,n)=>t?0:n,!0),new L(d,w,w,(e,t,n)=>t?"":n,!0)),sub:new C("sub",new L(p,p,p,(e,t,n)=>t-n),new L(d,d,d,(e,t,n)=>t&&!n)),mul:new C("mul",new L(p,p,p,(e,t,n)=>t*n,!0),new L(d,d,d,(e,t,n)=>t&&n,!0),new L(d,p,p,(e,t,n)=>t?n:0,!0),new L(d,w,w,(e,t,n)=>t?n:"",!0),new L(w,p,w,(e,t,n)=>t.repeat(Math.floor(n))+t.substring(0,Math.round(n%1*t.length)),!0)),div:new C("div",new L(p,p,p,(e,t,n)=>t/n),new L(w,p,w,(e,t,n)=>t.substring(0,Math.round(t.length/n)))),mod:new C("mod",new L(p,p,p,(e,t,n)=>t%n)),or:new C("or",new L(d,d,d,(e,t,n)=>t||n,!0),new L(d,p,p,(e,t,n)=>t?0:n,!0),new L(d,w,w,(e,t,n)=>t?"":n,!0)),and:new C("and",new L(d,d,d,(e,t,n)=>t&&n,!0),new L(d,p,p,(e,t,n)=>t?n:0,!0),new L(d,w,w,(e,t,n)=>t?n:"",!0)),xor:new C("xor",new L(d,d,d,(e,t,n)=>t!==n,!0)),nand:new C("nand",new L(d,d,d,(e,t,n)=>!(t&&n),!0)),nor:new C("nor",new L(d,d,d,(e,t,n)=>!(t||n),!0)),xnor:new C("xnor",new L(d,d,d,(e,t,n)=>t===n,!0)),"bitwise or":new C("bitwise or",new L(p,p,p,(e,t,n)=>t|n,!0)),"bitwise and":new C("bitwise and",new L(p,p,p,(e,t,n)=>t&n,!0)),"bitwise xor":new C("bitwise xor",new L(p,p,p,(e,t,n)=>t^n,!0)),"less than or equal":new C("less than or equal",new L(p,p,d,(e,t,n)=>t<=n),new L(w,w,d,(e,t,n)=>t.localeCompare(n)<=0)),"less than":new C("less than",new L(p,p,d,(e,t,n)=>t<n),new L(w,w,d,(e,t,n)=>t.localeCompare(n)<0)),equals:new C("equals",new L(p,p,d,(e,t,n)=>t===n,!0),new L(w,w,d,(e,t,n)=>0===t.localeCompare(n),!0),new L(d,d,d,(e,t,n)=>t===n,!0)),"not equals":new C("not equals",new L(p,p,d,(e,t,n)=>t!==n,!0),new L(w,w,d,(e,t,n)=>0!==t.localeCompare(n),!0),new L(d,d,d,(e,t,n)=>t!==n,!0)),"greater than":new C("greater than",new L(p,p,d,(e,t,n)=>t>n),new L(w,w,d,(e,t,n)=>t.localeCompare(n)>0)),"greater than or equal":new C("greater than or equal",new L(p,p,d,(e,t,n)=>t>=n),new L(w,w,d,(e,t,n)=>t.localeCompare(n)>=0)),index:new C("index",new L(f,p,w,(e,t,n)=>{if(n%1!=0)throw new Error(`RHS ${n} is not an integer`);if(n<0||n>=t.length)throw new RangeError(`index ${n} is out of range for list of length ${t.length}`);return t[n]}),new L(m,p,p,(e,t,n)=>{if(n%1!=0)throw new Error(`RHS ${n} is not an integer`);if(n<0||n>=t.length)throw new RangeError(`index ${n} is out of range for list of length ${t.length}`);return t[n]}),new L(y,p,d,(e,t,n)=>{if(n%1!=0)throw new Error(`RHS ${n} is not an integer`);if(n<0||n>=t.length)throw new RangeError(`index ${n} is out of range for list of length ${t.length}`);return t[n]})),join:new C("join",new L(w,w,f,(e,t,n)=>[t,n]),new L(w,f,f,(e,t,n)=>[t,...n]),new L(f,w,f,(e,t,n)=>[...t,n]),new L(f,f,f,(e,t,n)=>t.concat(n)),new L(p,p,m,(e,t,n)=>[t,n]),new L(p,m,m,(e,t,n)=>[t,...n]),new L(m,p,m,(e,t,n)=>[...t,n]),new L(m,m,m,(e,t,n)=>t.concat(n)),new L(d,d,y,(e,t,n)=>[t,n]),new L(d,y,y,(e,t,n)=>[t,...n]),new L(y,d,y,(e,t,n)=>[...t,n]),new L(y,y,y,(e,t,n)=>t.concat(n))),"pick n":new C("pick n",new L(f,p,f,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");return t.toSorted(()=>Math.random()-.5).slice(0,n)}),new L(m,p,m,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");return t.toSorted(()=>Math.random()-.5).slice(0,n)}),new L(y,p,y,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");return t.toSorted(()=>Math.random()-.5).slice(0,n)}),new L(E,p,E,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");return t.toSorted(()=>Math.random()-.5).slice(0,n)}),new L(b,p,b,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");return t.toSorted(()=>Math.random()-.5).slice(0,n)}),new L(T,p,T,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");return t.toSorted(()=>Math.random()-.5).slice(0,n)})),"pick n returned":new C("pick n returned",new L(f,p,f,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");const r=[];for(let e=0;e<n;e++)r.push(t[Math.floor(Math.random()*t.length)]);return r}),new L(m,p,m,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");const r=[];for(let e=0;e<n;e++)r.push(t[Math.floor(Math.random()*t.length)]);return r}),new L(y,p,y,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");const r=[];for(let e=0;e<n;e++)r.push(t[Math.floor(Math.random()*t.length)]);return r}),new L(E,p,E,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");const r=[];for(let e=0;e<n;e++)r.push(t[Math.floor(Math.random()*t.length)]);return r}),new L(b,p,b,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");const r=[];for(let e=0;e<n;e++)r.push(t[Math.floor(Math.random()*t.length)]);return r}),new L(T,p,T,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");const r=[];for(let e=0;e<n;e++)r.push(t[Math.floor(Math.random()*t.length)]);return r}))},H={conditional:new class{name;providers;constructor(e,...t){this.name=e,this.providers=t}findImpl(e,t,n){for(const r of this.providers)if(e.extends(r.aType)&&t.extends(r.bType)&&n.extends(r.cType))return r;throw new TypeError(`no ${this.name} implementation found for (${e.name}, ${t.name}, ${n.name}) argument types`)}}("conditional",new I(d,w,w,w,(e,t,n,r)=>t?n:r),new I(d,p,p,p,(e,t,n,r)=>t?n:r),new I(d,d,d,d,(e,t,n,r)=>t?n:r),new I(d,f,f,f,(e,t,n,r)=>t?n:r),new I(d,m,m,m,(e,t,n,r)=>t?n:r),new I(d,y,y,y,(e,t,n,r)=>t?n:r))};function P(e){return"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name&&"arg"in e&&U(e.arg)}function j(e){return"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name&&"lhs"in e&&U(e.lhs)&&"rhs"in e&&U(e.rhs)}function G(e){return"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name&&"a"in e&&U(e.a)&&"b"in e&&U(e.b)&&"c"in e&&U(e.c)}function U(e){return v(e)||function(e){return"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name}(e)||P(e)||j(e)||G(e)}function _(e){if(v(e))return A.literal(e);if(G(e)){const t=H[e.name];if(!t)throw new ReferenceError(`no ternary provider with name "${e.name}" exists`);const n=_(e.a),r=_(e.b),o=_(e.c),a=t.findImpl(n.returnType,r.returnType,o.returnType);return new A(a.returnType,e=>a.apply(e,n.apply(e),r.apply(e),o.apply(e)))}if(j(e)){const t=k[e.name];if(!t)throw new ReferenceError(`no binary provider with name "${e.name}" exists`);const n=_(e.lhs),r=_(e.rhs),o=t.findImpl(n.returnType,r.returnType);return r.chain(n.chainLHS(o))}if(P(e)){const t=$[e.name];if(!t)throw new ReferenceError(`no unary provider with name "${e.name}" exists`);const n=_(e.arg),r=t.findImpl(n.returnType);return n.chain(r)}{const t=V[e.name];if(!t)throw new ReferenceError(`no nullary provider with name "${e.name}" exists`);return t}}class B{locale;translations={};constructor(e){this.locale=new Intl.Locale(e)}register(e){return this.translations={...this.translations,...e},this}lookup(e){return this.translations[e]}}class F{dict;items=new WeakMap;phraseApplicators=new Set;constructor(e){this.dict=e}setDictionary(e){if(e!==this.dict){this.dict=e;for(const e of this.phraseApplicators){const t=this.items.get(e);if(void 0===t)this.phraseApplicators.delete(e);else{const{dictKey:n,ctx:r}=e.phrase,o=this.dict.lookup(n),a=String(o?.apply(r)??n);e.applicator(t,a)}}}}register(e,t,n,r){const o={phrase:{dictKey:e,ctx:t},applicator:r};this.phraseApplicators.add(o),this.items.set(o,n);const a=this.dict.lookup(e);r(n,String(a?.apply(t)??e))}registerTextContent(e,t,n){return this.register(e,t,n,(e,t)=>e.textContent=t)}registerTitle(e,t,n){return this.register(e,t,n,(e,t)=>e.title=t)}}var q;!function(e){e.ENGLISH="en-US",e.DUTCH="nl-NL"}(q||(q={}));const W=[q.ENGLISH,q.DUTCH],K=q.ENGLISH;function z(e){return Object.values(q).some(t=>e===t)}!function(e){const n="language";function r(){const e=localStorage.getItem(n);return z(e)?e:K}function o(r){localStorage.setItem(n,r),t.onceDOMContentLoaded().then(()=>{document.body.setAttribute("language",r)}),e.DICTS_PROMISE.then(e=>e[r]).then(t=>e.MANAGER_PROMISE.then(e=>e.setDictionary(t)))}e.DICTS_PROMISE=Promise.all(W.map(e=>{return(t=(t=e).toString()).startsWith("lang")||(t="lang/"+t),t.endsWith(".json")||(t+=".json"),fetch(t).then(e=>{if(e.ok)return e.json();throw new Error("language file not found")}).then(e=>{if("object"==typeof(n=e)&&null!==n&&Object.values(n).every(U))return t=e,Object.fromEntries(Object.entries(t).map(([e,t])=>[e,_(t)]));throw new TypeError("invalid language file");var t,n});var t})).then(e=>Object.fromEntries(W.map((t,n)=>[t,new B(t).register(e[n])]))),e.MANAGER_PROMISE=e.DICTS_PROMISE.then(e=>new F(e[r()])),e.get=r,e.set=o,e.setNext=function(){const e=W.indexOf(r()),t=W[(e+1)%W.length];return o(t),t};const a=localStorage.getItem(n);z(a)?o(a):o(W.find(e=>{return t=e,n=navigator.language,"string"==typeof t&&(t=new Intl.Locale(t)),"string"==typeof n&&(n=new Intl.Locale(n)),(t.language!==n.language?0:t.script!==n.script?1:t.region!==n.region?2:3)>0;var t,n})??K)}(q||(q={}));const J=q;function Y(e,t){return"string"==typeof e?document.createTextNode(e):e instanceof Element?e:e instanceof Q?e.apply(t):null}class Q{mold;defaultCtx;constructor(e,t){this.mold=e,this.defaultCtx=Object.freeze(t)}addStep(e){return new Q(t=>{const{e:n,ctx:r}=this.mold(t);return e(n,r)},this.defaultCtx)}id(e){return this.addStep((t,n)=>(Q.DynValue.resolve(e,t,n).then(e=>t.id=e),{e:t,ctx:n}))}class(...e){return this.addStep((t,n)=>{for(const r of e)Q.DynValue.resolve(r,t,n).then(e=>{t.classList.add(...[Q.DynValue.evaluate(e,t,n)].flat().filter(e=>e).map(e=>e.toString().split(/\W+/)).flat())});return{e:t,ctx:n}})}attr(e,t){return this.addStep((n,r)=>(Q.DynValue.resolve(e,n,r).then(e=>{e&&(t?Q.DynValue.resolve(e,n,r).then(t=>{null!=t&&n.setAttribute(e,t)}):n.toggleAttribute(e,!0))}),{e:n,ctx:r}))}attrs(e){return this.addStep((t,n)=>(Q.DynValue.resolve(e,t,n).then(e=>{for(const n in e){const r=e[n];null!==r&&t.setAttribute(n,r)}}),{e:t,ctx:n}))}children(...e){return this.addStep((t,n)=>{for(const r of e){const e=Q.DynValue.evaluate(r,t,n);if(e instanceof Promise){const r=document.createElement("placeholder");t.appendChild(r),e.then(e=>r.replaceWith(...[e].flat().map(e=>Y(e,n)).filter(e=>null!==e)))}else t.append(...[e].flat().map(e=>Y(e,n)).filter(e=>null!==e))}return{e:t,ctx:n}})}text(e){return this.addStep((t,n)=>(Q.DynValue.resolve(e,t,n).then(e=>t.textContent=e),{e:t,ctx:n}))}phraseText(e,t=new M,n=J.MANAGER_PROMISE){return this.addStep((r,o)=>(Promise.all([n,Q.DynValue.evaluate(e,r,o)]).then(([e,n])=>e.registerTextContent(n,t,r)),{e:r,ctx:o}))}tooltip(e){return this.addStep((t,n)=>(Q.DynValue.resolve(e,t,n).then(e=>t.title=e),{e:t,ctx:n}))}phraseTooltip(e,t=new M,n=J.MANAGER_PROMISE){return this.addStep((r,o)=>(Promise.all([n,Q.DynValue.evaluate(e,r,o)]).then(([e,n])=>e.registerTitle(n,t,r)),{e:r,ctx:o}))}on(e,t){return this.addStep((n,r)=>(n.addEventListener(e,e=>t(e,n,r)),{e:n,ctx:r}))}once(e,t){return this.addStep((n,r)=>(n.addEventListener(e,e=>t(e,n,r),{once:!0}),{e:n,ctx:r}))}do(e){return this.addStep((t,n)=>(e(t,n),{e:t,ctx:n}))}apply(e={}){const t={...this.defaultCtx,...e};return this.mold(t).e}copy(){return new Q(this.mold,this.defaultCtx)}static fromTagName(e,t){return new Q(t=>({e:document.createElement(e),ctx:t}),t)}}!function(e){let t;!function(e){function t(e,t,n){return"function"==typeof e?e(t,n):e}e.evaluate=t,e.resolve=function(e,n,r){return Promise.resolve(t(e,n,r))}}(t=e.DynValue||(e.DynValue={}))}(Q||(Q={}));const X=Q,Z=new DOMParser;function ee(e){return fetch(`images/icons/${e}.svg`).then(e=>{if(e.ok)return e.text();throw new Error("icon SVG not found")}).then(e=>Z.parseFromString(e,"image/svg+xml")).then(e=>{const t=e.firstChild;if(t instanceof SVGElement)return t.classList.add("icon"),t;throw new TypeError("invalid SVG")})}var te;!function(e){e.NORMAL="normal",e.HIGH="high"}(te||(te={}));const ne=[te.NORMAL,te.HIGH],re=te.NORMAL;function oe(e){return Object.values(te).some(t=>e===t)}!function(e){const n="contrast";function r(){const e=localStorage.getItem(n);return oe(e)?e:re}function o(e){localStorage.setItem(n,e),t.onceDOMContentLoaded().then(()=>{document.body.setAttribute("contrast",e)})}e.get=r,e.set=o,e.setNext=function(){const e=ne.indexOf(r()),t=ne[(e+1)%ne.length];return o(t),t};const a=localStorage.getItem(n);oe(a)?o(a):matchMedia("(prefers-contrast: more)").matches?o(e.HIGH):o(re)}(te||(te={}));const ae=te;var ie;!function(e){e.NORMAL="normal",e.REDUCED="reduced"}(ie||(ie={}));const se=[ie.NORMAL,ie.REDUCED],ce=ie.NORMAL;function le(e){return Object.values(ie).some(t=>e===t)}!function(e){const n="motion";function r(){const e=localStorage.getItem(n);return le(e)?e:ce}function o(e){localStorage.setItem(n,e),t.onceDOMContentLoaded().then(()=>{document.body.setAttribute("motion",e)})}e.get=r,e.set=o,e.setNext=function(){const e=se.indexOf(r()),t=se[(e+1)%se.length];return o(t),t};const a=localStorage.getItem(n);le(a)?o(a):matchMedia("(prefers-reduced-motion: reduce)").matches?o(e.REDUCED):o(ce)}(ie||(ie={}));const he=ie,ue={[c.DEFAULT_LIGHT]:"light-mode",[c.DEFAULT_DARK]:"dark-mode",[c.PLANT]:"nature",[c.SARDINE]:"set-meal",[c.FILMSTRIP]:"theaters",[c.HEART]:"heart-smile"},we={[ae.NORMAL]:"contrast",[ae.HIGH]:"contrast-circle"},pe={[he.NORMAL]:"trail-length",[he.REDUCED]:"trail-length-short"},de={[J.ENGLISH]:"us-flag",[J.DUTCH]:"nl-flag"};Promise.all([(async()=>X.fromTagName("header",{}).class("flex-columns").children(X.fromTagName("h1",{}).id("logo").text("Guess Some Words"),X.fromTagName("div",{}).id("settings-dropdown").class("flex","rows").children(ee("settings"),X.fromTagName("div",{}).class("hr"),X.fromTagName("button",{}).id("language-button").phraseTooltip("header.settings.language").children(ee(de[J.get()])).on("click",(e,t)=>{const n=J.setNext();ee(de[n]).then(e=>t.firstChild?.replaceWith(e))}),X.fromTagName("button",{}).id("color-palette-button").phraseTooltip("header.settings.colorPalette").children(ee(ue[c.get()])).on("click",(e,t)=>{const n=c.setNext();ee(ue[n]).then(e=>t.firstChild?.replaceWith(e))}),X.fromTagName("button",{}).id("high-contrast-button").phraseTooltip("header.settings.contrast").children(ee(we[ae.get()])).on("click",(e,t)=>{const n=ae.setNext();ee(we[n]).then(e=>t.firstChild?.replaceWith(e))}),X.fromTagName("button",{}).id("reduced-motion-button").phraseTooltip("header.settings.reducedMotion").children(ee(pe[he.get()])).on("click",(e,t)=>{const n=he.setNext();ee(pe[n]).then(e=>t.firstChild?.replaceWith(e))})).on("mouseenter",(e,t)=>{r.canHover()&&(t.toggleAttribute("open",!0),t.style.setProperty("--target-height",`${t.scrollHeight}px`))}).on("mouseleave",(e,t)=>{r.canHover()&&t.toggleAttribute("open",!1)}).on("click",(e,t)=>{r.canHover()||(t.toggleAttribute("open"),t.style.setProperty("--target-height",`${t.scrollHeight}px`))})).apply())(),(async()=>X.fromTagName("footer",{}).class("flex","columns").children(X.fromTagName("p",{}).phraseText("footer.madeBy"),X.fromTagName("a",{}).text("THSlimes").attr("href","https://github.com/THSlimes")).apply())(),t.onceDOMContentLoaded()]).then(([e,t])=>{document.body.prepend(e),document.body.append(t)}),console.log("hi")})();