(()=>{"use strict";class e{name;constructor(e){this.name=e}array(){return new i(this)}}var t;!function(e){e.STRING="string",e.NUMBER="number",e.BOOLEAN="boolean"}(t||(t={}));class n extends e{primitive;constructor(e){super(e),this.primitive=e}extends(e){return e instanceof n&&e.primitive===this.primitive}isAssignable(e){return typeof e===this.primitive}}const r=new n(t.STRING),o=new n(t.NUMBER),a=new n(t.BOOLEAN);class i extends e{elementType;constructor(e){super(e.name+"[]"),this.elementType=e}extends(e){return e instanceof i&&this.elementType.extends(e.elementType)}isAssignable(e){return Array.isArray(e)&&e.every(e=>this.elementType.isAssignable(e))}}const s=r.array(),c=o.array(),l=a.array(),h=s.array(),w=c.array(),u=l.array();function p(e){if(Array.isArray(e)){if(0===e.length)return!0;{const t=typeof e[0];for(let n=0;n<e.length;n++){const r=e[n];if(!p(r)||typeof r!==t)return!1}return!0}}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function d(e){switch(typeof e){case"string":return r;case"number":return o;case"boolean":return a;case"object":if(null!==e&&Array.isArray(e)){if(0===e.length)throw new TypeError("cannot find type of zero-length array");return d(e[0]).array()}default:throw new TypeError(`could not find type of value ${JSON.stringify(e)}`)}}class f{stringVars={};numberVars={};booleanVars={};setStringVar(e,t){this.stringVars[e]=t}getStringVar(e,t){const n=this.stringVars[e]??t;if(void 0===n)throw new ReferenceError(`undefined string variable "${e}"`);return n}setNumberVar(e,t){this.numberVars[e]=t}getNumberVar(e,t){const n=this.numberVars[e]??t;if(void 0===n)throw new ReferenceError(`undefined string variable "${e}"`);return n}setBooleanVar(e,t){this.booleanVars[e]=t}getBooleanVar(e,t){const n=this.booleanVars[e]??t;if(void 0===n)throw new ReferenceError(`undefined string variable "${e}"`);return n}copy(){const e=new f;for(const t in this.stringVars)e.setStringVar(t,this.stringVars[t]);for(const t in this.numberVars)e.setNumberVar(t,this.numberVars[t]);for(const t in this.booleanVars)e.setBooleanVar(t,this.booleanVars[t]);return e}static fromVars(e){const t=new f;for(const n in e){const r=e[n];"string"==typeof r&&t.setStringVar(n,r),"number"==typeof r&&t.setNumberVar(n,r),"boolean"==typeof r&&t.setBooleanVar(n,r)}return t}}class m{argTypes;returnType;apply;constructor(e,t,n){this.argTypes=e,this.returnType=t,this.apply=n}}class g extends m{constructor(e,t){super([],e,t)}chain(e){return new g(e.returnType,t=>e.apply(t,this.apply(t)))}chainLHS(e){return new y(e.rhsType,e.returnType,(t,n)=>e.apply(t,this.apply(t),n))}chainRHS(e){return new y(e.lhsType,e.returnType,(t,n)=>e.apply(t,n,this.apply(t)))}static literal(e){return new g(d(e),()=>e)}}class y extends m{get argType(){return this.argTypes[0]}constructor(e,t,n){super([e],t,n)}chain(e){return new y(this.argType,e.returnType,(t,n)=>e.apply(t,this.apply(t,n)))}chainLHS(e){return new b(this.argType,e.rhsType,e.returnType,(t,n,r)=>e.apply(t,this.apply(t,n),r))}chainRHS(e){return new b(e.lhsType,this.argType,e.returnType,(t,n,r)=>e.apply(t,n,this.apply(t,r)))}}class b extends m{get lhsType(){return this.argTypes[0]}get rhsType(){return this.argTypes[1]}isCommutative;constructor(e,t,n,r,o=!1){super([e,t],n,r),this.isCommutative=o}chain(e){return new b(this.lhsType,this.rhsType,e.returnType,(t,n,r)=>e.apply(t,this.apply(t,n,r)))}}class E extends m{get aType(){return this.argTypes[0]}get bType(){return this.argTypes[1]}get cType(){return this.argTypes[2]}constructor(e,t,n,r,o){super([e,t,n],r,o)}chain(e){return new E(this.aType,this.bType,this.cType,e.returnType,(t,n,r,o)=>e.apply(t,this.apply(t,n,r,o)))}}class T{locale;translations={};constructor(e){this.locale=new Intl.Locale(e)}localeMatchScore(e){return"string"==typeof e?this.localeMatchScore(new Intl.Locale(e)):e.language!==this.locale.language?0:e.script!==this.locale.script?1:e.region!==this.locale.region?2:3}register(e){return this.translations={...this.translations,...e},this}lookup(e){return this.translations[e]}}class v{dict;items=new WeakMap;phraseApplicators=new Set;constructor(e){this.dict=e}setDictionary(e){if(e!==this.dict){this.dict=e;for(const e of this.phraseApplicators){const t=this.items.get(e);if(void 0===t)this.phraseApplicators.delete(e);else{const{dictKey:n,ctx:r}=e.phrase,o=this.dict.lookup(n),a=String(o?.apply(r)??n);e.applicator(t,a)}}}}register(e,t,n,r){const o={phrase:{dictKey:e,ctx:t},applicator:r};this.phraseApplicators.add(o),this.items.set(o,n);const a=this.dict.lookup(e);r(n,String(a?.apply(t)??e))}registerTextContent(e,t,n){return this.register(e,t,n,(e,t)=>e.textContent=t)}registerTitle(e,t,n){return this.register(e,t,n,(e,t)=>e.title=t)}}var M;!function(e){e.pick=function(e){return e[Math.floor(Math.random()*e.length)]}}(M||(M={}));const S=M;class x{name;providers;constructor(e,...t){this.name=e,this.providers=t}findImpl(e){for(const t of this.providers)if(e.extends(t.argType))return t;throw new TypeError(`no ${this.name} implementation found for ${e.name} argument type`)}}class L{name;providers;constructor(e,...t){this.name=e,this.providers=t}findImpl(e,t){for(const n of this.providers){if(e.extends(n.lhsType)&&t.extends(n.rhsType))return n;if(n.isCommutative&&e.extends(n.rhsType)&&t.extends(n.lhsType))return new b(n.rhsType,n.lhsType,n.returnType,(e,t,r)=>n.apply(e,r,t))}throw new TypeError(`no ${this.name} implementation found for (${e.name}, ${t.name}) argument types`)}}const A={"random number":new g(o,Math.random),"random boolean":new g(a,()=>Math.random()<=.5),timestamp:new g(o,Date.now),year:new g(o,()=>(new Date).getFullYear()),month:new g(o,()=>(new Date).getMonth()+1),day:new g(o,()=>(new Date).getDate()),hours:new g(o,()=>(new Date).getHours()),minutes:new g(o,()=>(new Date).getMinutes()),seconds:new g(o,()=>(new Date).getSeconds()),milliseconds:new g(o,()=>(new Date).getMilliseconds())},D={negate:new x("negate",new y(a,a,(e,t)=>!t),new y(o,o,(e,t)=>-t)),invert:new x("invert",new y(o,o,(e,t)=>{if(0===t)throw new RangeError(`cannot take multiplicative inverse of ${t}`);return 1/t})),signum:new x("signum",new y(o,o,(e,t)=>Math.sign(t))),length:new x("length",new y(r,o,(e,t)=>t.length),new y(s,o,(e,t)=>t.length),new y(c,o,(e,t)=>t.length),new y(l,o,(e,t)=>t.length)),square:new x("square",new y(o,o,(e,t)=>t**2)),sqrt:new x("square root",new y(o,o,(e,t)=>{if(t<0)throw new RangeError(`cannot take square root of ${t}`);return Math.sqrt(t)})),cube:new x("cube",new y(o,o,(e,t)=>t**3)),"cube root":new x("cube root",new y(o,o,(e,t)=>{if(t<0)throw new RangeError(`cannot take cube root of ${t}`);return Math.cbrt(t)})),exp:new x("exp",new y(o,o,(e,t)=>Math.exp(t))),exp2:new x("exp2",new y(o,o,(e,t)=>2**t)),exp10:new x("exp10",new y(o,o,(e,t)=>10**t)),log:new x("log",new y(o,o,(e,t)=>{if(t<=0)throw new RangeError(`cannot take log of ${t}`);return Math.log(t)})),log2:new x("log2",new y(o,o,(e,t)=>{if(t<=0)throw new RangeError(`cannot take log2 of ${t}`);return Math.log2(t)})),log10:new x("log10",new y(o,o,(e,t)=>{if(t<=0)throw new RangeError(`cannot take log10 of ${t}`);return Math.log10(t)})),round:new x("round",new y(o,o,(e,t)=>Math.round(t))),floor:new x("floor",new y(o,o,(e,t)=>Math.floor(t))),ceil:new x("ceil",new y(o,o,(e,t)=>Math.ceil(t))),cos:new x("cos",new y(o,o,(e,t)=>Math.cos(t))),sin:new x("sin",new y(o,o,(e,t)=>Math.sin(t))),tan:new x("tan",new y(o,o,(e,t)=>Math.tan(t))),"deg to rad":new x("deg to rad",new y(o,o,(e,t)=>t/360*2*Math.PI)),"rad to deg":new x("rad to deg",new y(o,o,(e,t)=>t/2/Math.PI*360)),pick:new x("pick",new y(s,r,(e,t)=>S.pick(t)),new y(l,a,(e,t)=>S.pick(t)),new y(c,o,(e,t)=>S.pick(t))),shuffle:new x("shuffle",new y(s,s,(e,t)=>t.toSorted(()=>Math.random()-.5)),new y(c,c,(e,t)=>t.toSorted(()=>Math.random()-.5)),new y(l,l,(e,t)=>t.toSorted(()=>Math.random()-.5))),lowercase:new x("lowercase",new y(r,r,(e,t)=>t.toLocaleLowerCase())),uppercase:new x("uppercase",new y(r,r,(e,t)=>t.toLocaleUpperCase())),capitalize:new x("capitalize",new y(r,r,(e,t)=>t.charAt(0).toLocaleUpperCase()+t.substring(1))),"capitalize all":new x("capitalize all",new y(r,r,(e,t)=>t.split(" ").map(e=>e.charAt(0).toLocaleUpperCase()+e.substring(1)).join(" "))),split:new x("split",new y(r,s,(e,t)=>t.split(" "))),join:new x("join",new y(s,r,(e,t)=>t.join(" "))),reverse:new x("reverse",new y(r,r,(e,t)=>t.split("").reverse().join("")),new y(s,s,(e,t)=>t.reverse()),new y(c,c,(e,t)=>t.reverse()),new y(l,l,(e,t)=>t.reverse())),list:new x("list",new y(r,s,(e,t)=>[t]),new y(o,c,(e,t)=>[t]),new y(a,l,(e,t)=>[t])),sort:new x("sort",new y(s,s,(e,t)=>t.toSorted()),new y(c,c,(e,t)=>t.toSorted((e,t)=>e-t)),new y(l,l,(e,t)=>t.toSorted())),head:new x("head",new y(r,r,(e,t)=>t.charAt(0)),new y(s,r,(e,t)=>{if(0===t.length)throw new RangeError("empty string array");return t[0]}),new y(c,o,(e,t)=>{if(0===t.length)throw new RangeError("empty number array");return t[0]}),new y(l,a,(e,t)=>{if(0===t.length)throw new RangeError("empty boolean array");return t[0]})),last:new x("last",new y(r,r,(e,t)=>t.charAt(t.length-1)),new y(s,r,(e,t)=>{if(0===t.length)throw new RangeError("empty string array");return t[t.length-1]}),new y(c,o,(e,t)=>{if(0===t.length)throw new RangeError("empty number array");return t[t.length-1]}),new y(l,a,(e,t)=>{if(0===t.length)throw new RangeError("empty boolean array");return t[t.length-1]})),init:new x("init",new y(r,r,(e,t)=>t.slice(1)),new y(s,s,(e,t)=>t.slice(1)),new y(c,c,(e,t)=>t.slice(1)),new y(l,l,(e,t)=>t.slice(1))),tail:new x("tail",new y(r,r,(e,t)=>t.slice(0,-1)),new y(s,s,(e,t)=>t.slice(0,-1)),new y(c,c,(e,t)=>t.slice(0,-1)),new y(l,l,(e,t)=>t.slice(0,-1))),"to string":new x("to string",new y(r,r,(e,t)=>t),new y(o,r,(e,t)=>t.toString()),new y(a,r,(e,t)=>t.toString())),"to number":new x("to number",new y(r,o,(e,t)=>{const n=Number(t);if(isNaN(n))throw new SyntaxError(`invalid number format ${JSON.stringify(t)}`);return n}),new y(o,o,(e,t)=>t),new y(a,o,(e,t)=>t?1:0)),"to boolean":new x("to boolean",new y(r,a,(e,t)=>!!t),new y(o,a,(e,t)=>!!t),new y(a,a,(e,t)=>t)),"string variable":new x("string variable",new y(r,r,(e,t)=>{const n=e.getStringVar(t);if(void 0===n)throw new ReferenceError(`no string variable named ${JSON.stringify(t)}`);return n})),"number variable":new x("number variable",new y(r,o,(e,t)=>{const n=e.getNumberVar(t);if(void 0===n)throw new ReferenceError(`no string variable named ${JSON.stringify(t)}`);return n})),"boolean variable":new x("boolean variable",new y(r,a,(e,t)=>{const n=e.getBooleanVar(t);if(void 0===n)throw new ReferenceError(`no string variable named ${JSON.stringify(t)}`);return n}))},N={add:new L("add",new b(r,r,r,(e,t,n)=>t+n,!1),new b(o,o,o,(e,t,n)=>t+n,!0),new b(a,a,a,(e,t,n)=>t||n,!0),new b(a,o,o,(e,t,n)=>t?0:n,!0),new b(a,r,r,(e,t,n)=>t?"":n,!0)),sub:new L("sub",new b(o,o,o,(e,t,n)=>t-n),new b(a,a,a,(e,t,n)=>t&&!n)),mul:new L("mul",new b(o,o,o,(e,t,n)=>t*n,!0),new b(a,a,a,(e,t,n)=>t&&n,!0),new b(a,o,o,(e,t,n)=>t?n:0,!0),new b(a,r,r,(e,t,n)=>t?n:"",!0),new b(r,o,r,(e,t,n)=>t.repeat(Math.floor(n))+t.substring(0,Math.round(n%1*t.length)),!0)),div:new L("div",new b(o,o,o,(e,t,n)=>t/n),new b(r,o,r,(e,t,n)=>t.substring(0,Math.round(t.length/n)))),mod:new L("mod",new b(o,o,o,(e,t,n)=>t%n)),or:new L("or",new b(a,a,a,(e,t,n)=>t||n,!0),new b(a,o,o,(e,t,n)=>t?0:n,!0),new b(a,r,r,(e,t,n)=>t?"":n,!0)),and:new L("and",new b(a,a,a,(e,t,n)=>t&&n,!0),new b(a,o,o,(e,t,n)=>t?n:0,!0),new b(a,r,r,(e,t,n)=>t?n:"",!0)),xor:new L("xor",new b(a,a,a,(e,t,n)=>t!==n,!0)),nand:new L("nand",new b(a,a,a,(e,t,n)=>!(t&&n),!0)),nor:new L("nor",new b(a,a,a,(e,t,n)=>!(t||n),!0)),xnor:new L("xnor",new b(a,a,a,(e,t,n)=>t===n,!0)),"bitwise or":new L("bitwise or",new b(o,o,o,(e,t,n)=>t|n,!0)),"bitwise and":new L("bitwise and",new b(o,o,o,(e,t,n)=>t&n,!0)),"bitwise xor":new L("bitwise xor",new b(o,o,o,(e,t,n)=>t^n,!0)),"less than or equal":new L("less than or equal",new b(o,o,a,(e,t,n)=>t<=n),new b(r,r,a,(e,t,n)=>t.localeCompare(n)<=0)),"less than":new L("less than",new b(o,o,a,(e,t,n)=>t<n),new b(r,r,a,(e,t,n)=>t.localeCompare(n)<0)),equals:new L("equals",new b(o,o,a,(e,t,n)=>t===n,!0),new b(r,r,a,(e,t,n)=>0===t.localeCompare(n),!0),new b(a,a,a,(e,t,n)=>t===n,!0)),"not equals":new L("not equals",new b(o,o,a,(e,t,n)=>t!==n,!0),new b(r,r,a,(e,t,n)=>0!==t.localeCompare(n),!0),new b(a,a,a,(e,t,n)=>t!==n,!0)),"greater than":new L("greater than",new b(o,o,a,(e,t,n)=>t>n),new b(r,r,a,(e,t,n)=>t.localeCompare(n)>0)),"greater than or equal":new L("greater than or equal",new b(o,o,a,(e,t,n)=>t>=n),new b(r,r,a,(e,t,n)=>t.localeCompare(n)>=0)),index:new L("index",new b(s,o,r,(e,t,n)=>{if(n%1!=0)throw new Error(`RHS ${n} is not an integer`);if(n<0||n>=t.length)throw new RangeError(`index ${n} is out of range for list of length ${t.length}`);return t[n]}),new b(c,o,o,(e,t,n)=>{if(n%1!=0)throw new Error(`RHS ${n} is not an integer`);if(n<0||n>=t.length)throw new RangeError(`index ${n} is out of range for list of length ${t.length}`);return t[n]}),new b(l,o,a,(e,t,n)=>{if(n%1!=0)throw new Error(`RHS ${n} is not an integer`);if(n<0||n>=t.length)throw new RangeError(`index ${n} is out of range for list of length ${t.length}`);return t[n]})),join:new L("join",new b(r,r,s,(e,t,n)=>[t,n]),new b(r,s,s,(e,t,n)=>[t,...n]),new b(s,r,s,(e,t,n)=>[...t,n]),new b(s,s,s,(e,t,n)=>t.concat(n)),new b(o,o,c,(e,t,n)=>[t,n]),new b(o,c,c,(e,t,n)=>[t,...n]),new b(c,o,c,(e,t,n)=>[...t,n]),new b(c,c,c,(e,t,n)=>t.concat(n)),new b(a,a,l,(e,t,n)=>[t,n]),new b(a,l,l,(e,t,n)=>[t,...n]),new b(l,a,l,(e,t,n)=>[...t,n]),new b(l,l,l,(e,t,n)=>t.concat(n))),"pick n":new L("pick n",new b(s,o,s,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");return t.toSorted(()=>Math.random()-.5).slice(0,n)}),new b(c,o,c,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");return t.toSorted(()=>Math.random()-.5).slice(0,n)}),new b(l,o,l,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");return t.toSorted(()=>Math.random()-.5).slice(0,n)}),new b(h,o,h,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");return t.toSorted(()=>Math.random()-.5).slice(0,n)}),new b(w,o,w,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");return t.toSorted(()=>Math.random()-.5).slice(0,n)}),new b(u,o,u,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");return t.toSorted(()=>Math.random()-.5).slice(0,n)})),"pick n returned":new L("pick n returned",new b(s,o,s,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");const r=[];for(let e=0;e<n;e++)r.push(t[Math.floor(Math.random()*t.length)]);return r}),new b(c,o,c,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");const r=[];for(let e=0;e<n;e++)r.push(t[Math.floor(Math.random()*t.length)]);return r}),new b(l,o,l,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");const r=[];for(let e=0;e<n;e++)r.push(t[Math.floor(Math.random()*t.length)]);return r}),new b(h,o,h,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");const r=[];for(let e=0;e<n;e++)r.push(t[Math.floor(Math.random()*t.length)]);return r}),new b(w,o,w,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");const r=[];for(let e=0;e<n;e++)r.push(t[Math.floor(Math.random()*t.length)]);return r}),new b(u,o,u,(e,t,n)=>{if(0===t.length)throw new Error("cannot pick from empty array");const r=[];for(let e=0;e<n;e++)r.push(t[Math.floor(Math.random()*t.length)]);return r}))},R={conditional:new class{name;providers;constructor(e,...t){this.name=e,this.providers=t}findImpl(e,t,n){for(const r of this.providers)if(e.extends(r.aType)&&t.extends(r.bType)&&n.extends(r.cType))return r;throw new TypeError(`no ${this.name} implementation found for (${e.name}, ${t.name}, ${n.name}) argument types`)}}("conditional",new E(a,r,r,r,(e,t,n,r)=>t?n:r),new E(a,o,o,o,(e,t,n,r)=>t?n:r),new E(a,a,a,a,(e,t,n,r)=>t?n:r),new E(a,s,s,s,(e,t,n,r)=>t?n:r),new E(a,c,c,c,(e,t,n,r)=>t?n:r),new E(a,l,l,l,(e,t,n,r)=>t?n:r))};function O(e){return"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name&&"arg"in e&&V(e.arg)}function I(e){return"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name&&"lhs"in e&&V(e.lhs)&&"rhs"in e&&V(e.rhs)}function C(e){return"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name&&"a"in e&&V(e.a)&&"b"in e&&V(e.b)&&"c"in e&&V(e.c)}function V(e){return p(e)||function(e){return"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name}(e)||O(e)||I(e)||C(e)}function k(e){if(p(e))return g.literal(e);if(C(e)){const t=R[e.name];if(!t)throw new ReferenceError(`no ternary provider with name "${e.name}" exists`);const n=k(e.a),r=k(e.b),o=k(e.c),a=t.findImpl(n.returnType,r.returnType,o.returnType);return new g(a.returnType,e=>a.apply(e,n.apply(e),r.apply(e),o.apply(e)))}if(I(e)){const t=N[e.name];if(!t)throw new ReferenceError(`no binary provider with name "${e.name}" exists`);const n=k(e.lhs),r=k(e.rhs),o=t.findImpl(n.returnType,r.returnType);return r.chain(n.chainLHS(o))}if(O(e)){const t=D[e.name];if(!t)throw new ReferenceError(`no unary provider with name "${e.name}" exists`);const n=k(e.arg),r=t.findImpl(n.returnType);return n.chain(r)}{const t=A[e.name];if(!t)throw new ReferenceError(`no nullary provider with name "${e.name}" exists`);return t}}function $(e){return(e=e.toString()).endsWith(".json")||(e+=".json"),fetch(e).then(e=>{if(e.ok)return e.json();throw new Error("language file not found")}).then(e=>{if("object"==typeof(n=e)&&null!==n&&Object.values(n).every(V))return t=e,Object.fromEntries(Object.entries(t).map(([e,t])=>[e,k(t)]));throw new TypeError("invalid language file");var t,n})}var H;!function(e){let t=!1;window.addEventListener("DOMContentLoaded",()=>t=!0),e.onceDOMContentLoaded=function(){return t?Promise.resolve():new Promise(e=>{window.addEventListener("DOMContentLoaded",()=>e(),{once:!0})})};class n extends Error{constructor(e){super(`No element with ID "${e}"`)}}e.NoSuchIdError=n,e.getElementById=function(e,t){const r=document.getElementById(e);if(null===r)throw new n(e);if(!(r instanceof t))throw new TypeError(`Element with ID "${e}" is not a ${t.name}, was "${r.constructor.name}" instead`);return r}}(H||(H={}));const P=H;var j;!function(e){let t;!function(e){e.MOBILE_SLIM="mobile-slim",e.MOBILE="mobile",e.TABLET="tablet",e.DESKTOP="desktop",e.DESKTOP_WIDE="desktop-wide"}(t=e.Viewport||(e.Viewport={}));const n={[t.DESKTOP_WIDE]:{width:16,height:9},[t.DESKTOP]:{width:4,height:3},[t.TABLET]:{width:3,height:4},[t.MOBILE]:{width:9,height:16},[t.MOBILE_SLIM]:{width:9,height:22}},r=new Set;e.onViewportChanged=function(e){r.add(e)},P.onceDOMContentLoaded().then(()=>{window.addEventListener("resize",()=>{const e=Object.values(t).find(e=>{const{width:t,height:r}=n[e];return matchMedia(`(max-aspect-ratio: ${t} / ${r})`).matches})??t.DESKTOP_WIDE;document.body.setAttribute("viewport",e),r.forEach(t=>t(e))}),window.dispatchEvent(new Event("resize"))});const o=matchMedia("(hover: hover)");e.canHover=function(){return o.matches};const a=new Set;let i;e.onHoverChanged=function(e){a.add(e)},P.onceDOMContentLoaded().then(()=>{document.body.toggleAttribute("hover",o.matches),o.addEventListener("change",e=>{document.body.toggleAttribute("can-hover",e.matches),a.forEach(t=>t(e.matches))})}),function(e){e.NONE="none",e.COARSE="coarse",e.FINE="fine"}(i=e.PointerAccuracy||(e.PointerAccuracy={}));const s={[i.NONE]:matchMedia("(pointer: none)"),[i.COARSE]:matchMedia("(pointer: coarse)"),[i.FINE]:matchMedia("(pointer: fine)")};e.pointerAccuracy=function(){return Object.values(i).find(e=>s[e].matches)??i.NONE};const c=new Set;e.onPointerChanged=function(e){c.add(e)},P.onceDOMContentLoaded().then(()=>Object.values(i).forEach(e=>{const t=s[e];t.matches&&document.body.setAttribute("pointer",e),t.addEventListener("change",t=>{t.matches&&(document.body.setAttribute("pointer",e),c.forEach(t=>t(e)))})}))}(j||(j={}));const U=j;var B;!function(e){e.DEFAULT_LIGHT="default-light",e.DEFAULT_DARK="default-dark",e.PLANT="plant",e.SARDINE="sardine",e.FILMSTRIP="filmstrip",e.HEART="heart"}(B||(B={}));const F=[B.DEFAULT_LIGHT,B.DEFAULT_DARK,B.PLANT,B.SARDINE,B.FILMSTRIP,B.HEART],G=B.DEFAULT_LIGHT;function _(e){return Object.values(B).some(t=>e===t)}!function(e){const t="palette";function n(){const n=localStorage.getItem(t);return _(n)?n:e.DEFAULT_LIGHT}function r(e){localStorage.setItem(t,e),P.onceDOMContentLoaded().then(()=>{document.body.setAttribute("palette",e)})}e.get=n,e.set=r,e.setNext=function(){const e=F.indexOf(n()),t=F[(e+1)%F.length];return r(t),t};const o=localStorage.getItem(t);_(o)?r(o):matchMedia("(prefers-color-scheme: light)").matches?r(e.DEFAULT_LIGHT):matchMedia("(prefers-color-scheme: dark)").matches?r(e.DEFAULT_DARK):r(G)}(B||(B={}));const q=B;function K(e,t){return"string"==typeof e?document.createTextNode(e):e instanceof Element?e:e instanceof W?e.apply(t):null}class W{mold;defaultCtx;constructor(e,t){this.mold=e,this.defaultCtx=Object.freeze(t)}addStep(e){return new W(t=>{const{e:n,ctx:r}=this.mold(t);return e(n,r)},this.defaultCtx)}id(e){return this.addStep((t,n)=>(W.DynValue.resolve(e,t,n).then(e=>t.id=e),{e:t,ctx:n}))}class(...e){return this.addStep((t,n)=>{for(const r of e)W.DynValue.resolve(r,t,n).then(e=>{t.classList.add(...[W.DynValue.evaluate(e,t,n)].flat().filter(e=>e).map(e=>e.toString().split(/\W+/)).flat())});return{e:t,ctx:n}})}attr(e,t){return this.addStep((n,r)=>(W.DynValue.resolve(e,n,r).then(e=>{e&&(t?W.DynValue.resolve(e,n,r).then(t=>{null!=t&&n.setAttribute(e,t)}):n.toggleAttribute(e,!0))}),{e:n,ctx:r}))}attrs(e){return this.addStep((t,n)=>(W.DynValue.resolve(e,t,n).then(e=>{for(const n in e){const r=e[n];null!==r&&t.setAttribute(n,r)}}),{e:t,ctx:n}))}children(...e){return this.addStep((t,n)=>{for(const r of e){const e=W.DynValue.evaluate(r,t,n);if(e instanceof Promise){const r=document.createElement("placeholder");t.appendChild(r),e.then(e=>r.replaceWith(...[e].flat().map(e=>K(e,n)).filter(e=>null!==e)))}else t.append(...[e].flat().map(e=>K(e,n)).filter(e=>null!==e))}return{e:t,ctx:n}})}text(e){return this.addStep((t,n)=>(W.DynValue.resolve(e,t,n).then(e=>t.textContent=e),{e:t,ctx:n}))}tooltip(e){return this.addStep((t,n)=>(W.DynValue.resolve(e,t,n).then(e=>t.title=e),{e:t,ctx:n}))}on(e,t){return this.addStep((n,r)=>(n.addEventListener(e,e=>t(e,n,r)),{e:n,ctx:r}))}once(e,t){return this.addStep((n,r)=>(n.addEventListener(e,e=>t(e,n,r),{once:!0}),{e:n,ctx:r}))}do(e){return this.addStep((t,n)=>(e(t,n),{e:t,ctx:n}))}apply(e={}){const t={...this.defaultCtx,...e};return this.mold(t).e}copy(){return new W(this.mold,this.defaultCtx)}static fromTagName(e,t){return new W(t=>({e:document.createElement(e),ctx:t}),t)}}!function(e){let t;!function(e){function t(e,t,n){return"function"==typeof e?e(t,n):e}e.evaluate=t,e.resolve=function(e,n,r){return Promise.resolve(t(e,n,r))}}(t=e.DynValue||(e.DynValue={}))}(W||(W={}));const z=W,J=new DOMParser;function Y(e){return fetch(`images/icons/${e}.svg`).then(e=>{if(e.ok)return e.text();throw new Error("icon SVG not found")}).then(e=>J.parseFromString(e,"image/svg+xml")).then(e=>{const t=e.firstChild;if(t instanceof SVGElement)return t.classList.add("icon"),t;throw new TypeError("invalid SVG")})}var Q;!function(e){e.NORMAL="normal",e.HIGH="high"}(Q||(Q={}));const X=[Q.NORMAL,Q.HIGH];function Z(e){return Object.values(Q).some(t=>e===t)}Q.NORMAL,function(e){const t="contrast";function n(){const n=localStorage.getItem(t);return Z(n)?n:e.NORMAL}function r(e){localStorage.setItem(t,e),P.onceDOMContentLoaded().then(()=>{document.body.setAttribute("contrast",e)})}e.get=n,e.set=r,e.setNext=function(){const e=X.indexOf(n()),t=X[(e+1)%X.length];return r(t),t};const o=localStorage.getItem(t);Z(o)?r(o):matchMedia("(prefers-contrast: more)").matches?r(e.HIGH):r(e.NORMAL)}(Q||(Q={}));const ee=Q;var te;!function(e){e.NORMAL="normal",e.REDUCED="reduced"}(te||(te={}));const ne=[te.NORMAL,te.REDUCED];function re(e){return Object.values(te).some(t=>e===t)}te.NORMAL,function(e){const t="motion";function n(){const n=localStorage.getItem(t);return re(n)?n:e.NORMAL}function r(e){localStorage.setItem(t,e),P.onceDOMContentLoaded().then(()=>{document.body.setAttribute("motion",e)})}e.get=n,e.set=r,e.setNext=function(){const e=ne.indexOf(n()),t=ne[(e+1)%ne.length];return r(t),t};const o=localStorage.getItem(t);re(o)?r(o):matchMedia("(prefers-reduced-motion: reduce)").matches?r(e.REDUCED):r(e.NORMAL)}(te||(te={}));const oe=te,ae={[q.DEFAULT_LIGHT]:"light-mode",[q.DEFAULT_DARK]:"dark-mode",[q.PLANT]:"nature",[q.SARDINE]:"set-meal",[q.FILMSTRIP]:"theaters",[q.HEART]:"heart-smile"},ie={[ee.NORMAL]:"contrast",[ee.HIGH]:"contrast-circle"},se={[oe.NORMAL]:"trail-length",[oe.REDUCED]:"trail-length-short"};Promise.all([(async()=>z.fromTagName("header",{}).class("flex-columns").children(z.fromTagName("h1",{}).id("logo").text("Guess Some Words"),z.fromTagName("div",{}).id("settings-dropdown").class("flex","rows").children(Y("settings"),z.fromTagName("button",{}).id("color-palette-button").tooltip("Color Palette").children(Y(ae[q.get()])).on("click",(e,t)=>{const n=q.setNext();Y(ae[n]).then(e=>t.firstChild?.replaceWith(e))}),z.fromTagName("button",{}).id("high-contrast-button").tooltip("Contrast").children(Y(ie[ee.get()])).on("click",(e,t)=>{const n=ee.setNext();Y(ie[n]).then(e=>t.firstChild?.replaceWith(e))}),z.fromTagName("button",{}).id("reduced-button").tooltip("Reduced Motion").children(Y(se[oe.get()])).on("click",(e,t)=>{const n=oe.setNext();Y(se[n]).then(e=>t.firstChild?.replaceWith(e))})).on("mouseenter",(e,t)=>{U.canHover()&&(t.toggleAttribute("open",!0),t.style.setProperty("--target-height",`${t.scrollHeight}px`))}).on("mouseleave",(e,t)=>{U.canHover()&&t.toggleAttribute("open",!1)}).on("click",(e,t)=>{U.canHover()||(t.toggleAttribute("open"),t.style.setProperty("--target-height",`${t.scrollHeight}px`))})).apply())(),(async()=>z.fromTagName("footer",{}).class("flex","columns").children(z.fromTagName("p",{}).text("Made by"),z.fromTagName("a",{}).text("THSlimes").attr("href","https://github.com/THSlimes")).apply())(),P.onceDOMContentLoaded()]).then(([e,t])=>{document.body.prepend(e),document.body.append(t)}),console.log("hi"),Promise.all([$("lang/en-US"),$("lang/nl-NL"),P.onceDOMContentLoaded()]).then(([e,t])=>{const n=new T("en-US").register(e),r=new T("nl-NL").register(t),o=new v(n),a=P.getElementById("content",HTMLDivElement).firstElementChild;for(let e=1;e<10;e++){const t=document.createElement("p");let n;switch(a.appendChild(t),e){case 1:n="test.firstPhrase";break;case 2:n="test.secondPhrase";break;case 3:n="test.thirdPhrase";break;default:n="test.nthPhrase"}o.registerTextContent(n,f.fromVars({n:e}),t)}setTimeout(()=>{o.setDictionary(r)},5e3)})})();