(()=>{"use strict";var t;!function(t){let e=!1;window.addEventListener("DOMContentLoaded",()=>e=!0),t.onceDOMContentLoaded=function(){return e?Promise.resolve():new Promise(t=>{window.addEventListener("DOMContentLoaded",()=>t(),{once:!0})})};class n extends Error{constructor(t){super(`No element with ID "${t}"`)}}t.NoSuchIdError=n,t.getElementById=function(t,e){const o=document.getElementById(t);if(null===o)throw new n(t);if(!(o instanceof e))throw new TypeError(`Element with ID "${t}" is not a ${e.name}, was "${o.constructor.name}" instead`);return o}}(t||(t={}));const e=t;var n;!function(t){let n;!function(t){t.MOBILE_SLIM="mobile-slim",t.MOBILE="mobile",t.TABLET="tablet",t.DESKTOP="desktop",t.DESKTOP_WIDE="desktop-wide"}(n=t.Viewport||(t.Viewport={}));const o={[n.DESKTOP_WIDE]:{width:16,height:9},[n.DESKTOP]:{width:4,height:3},[n.TABLET]:{width:3,height:4},[n.MOBILE]:{width:9,height:16},[n.MOBILE_SLIM]:{width:9,height:22}},r=new Set;t.onViewportChanged=function(t){r.add(t)},e.onceDOMContentLoaded().then(()=>{window.addEventListener("resize",()=>{const t=Object.values(n).find(t=>{const{width:e,height:n}=o[t];return matchMedia(`(max-aspect-ratio: ${e} / ${n})`).matches})??n.DESKTOP_WIDE;document.body.setAttribute("viewport",t),r.forEach(e=>e(t))}),window.dispatchEvent(new Event("resize"))});const c=matchMedia("(hover: hover)");t.canHover=function(){return c.matches};const a=new Set;let i;t.onHoverChanged=function(t){a.add(t)},e.onceDOMContentLoaded().then(()=>{document.body.toggleAttribute("hover",c.matches),c.addEventListener("change",t=>{document.body.toggleAttribute("can-hover",t.matches),a.forEach(e=>e(t.matches))})}),function(t){t.NONE="none",t.COARSE="coarse",t.FINE="fine"}(i=t.PointerAccuracy||(t.PointerAccuracy={}));const s={[i.NONE]:matchMedia("(pointer: none)"),[i.COARSE]:matchMedia("(pointer: coarse)"),[i.FINE]:matchMedia("(pointer: fine)")};t.pointerAccuracy=function(){return Object.values(i).find(t=>s[t].matches)??i.NONE};const l=new Set;t.onPointerChanged=function(t){l.add(t)},e.onceDOMContentLoaded().then(()=>Object.values(i).forEach(t=>{const e=s[t];e.matches&&document.body.setAttribute("pointer",t),e.addEventListener("change",e=>{e.matches&&(document.body.setAttribute("pointer",t),l.forEach(e=>e(t)))})}))}(n||(n={}));const o=n;var r;!function(t){t.DEFAULT_LIGHT="default-light",t.DEFAULT_DARK="default-dark",t.PLANT="plant",t.SARDINE="sardine",t.FILMSTRIP="filmstrip",t.HEART="heart"}(r||(r={}));const c=[r.DEFAULT_LIGHT,r.DEFAULT_DARK,r.PLANT,r.SARDINE,r.FILMSTRIP,r.HEART],a=r.DEFAULT_LIGHT;function i(t){return Object.values(r).some(e=>t===e)}!function(t){const n="palette";function o(){const e=localStorage.getItem(n);return i(e)?e:t.DEFAULT_LIGHT}function r(t){localStorage.setItem(n,t),e.onceDOMContentLoaded().then(()=>{document.body.setAttribute("palette",t)})}t.get=o,t.set=r,t.setNext=function(){const t=c.indexOf(o()),e=c[(t+1)%c.length];return r(e),e};const s=localStorage.getItem(n);i(s)?r(s):matchMedia("(prefers-color-scheme: light)").matches?r(t.DEFAULT_LIGHT):matchMedia("(prefers-color-scheme: dark)").matches?r(t.DEFAULT_DARK):r(a)}(r||(r={}));const s=r;function l(t,e){return"string"==typeof t?document.createTextNode(t):t instanceof Element?t:t instanceof d?t.apply(e):null}class d{mold;defaultCtx;constructor(t,e){this.mold=t,this.defaultCtx=Object.freeze(e)}addStep(t){return new d(e=>{const{e:n,ctx:o}=this.mold(e);return t(n,o)},this.defaultCtx)}id(t){return this.addStep((e,n)=>(d.DynValue.resolve(t,e,n).then(t=>e.id=t),{e,ctx:n}))}class(...t){return this.addStep((e,n)=>{for(const o of t)d.DynValue.resolve(o,e,n).then(t=>{e.classList.add(...[d.DynValue.evaluate(t,e,n)].flat().filter(t=>t).map(t=>t.toString().split(/\W+/)).flat())});return{e,ctx:n}})}attr(t,e){return this.addStep((n,o)=>(d.DynValue.resolve(t,n,o).then(t=>{t&&(e?d.DynValue.resolve(t,n,o).then(e=>{null!=e&&n.setAttribute(t,e)}):n.toggleAttribute(t,!0))}),{e:n,ctx:o}))}attrs(t){return this.addStep((e,n)=>(d.DynValue.resolve(t,e,n).then(t=>{for(const n in t){const o=t[n];null!==o&&e.setAttribute(n,o)}}),{e,ctx:n}))}children(...t){return this.addStep((e,n)=>{for(const o of t){const t=d.DynValue.evaluate(o,e,n);if(t instanceof Promise){const o=document.createElement("placeholder");e.appendChild(o),t.then(t=>o.replaceWith(...[t].flat().map(t=>l(t,n)).filter(t=>null!==t)))}else e.append(...[t].flat().map(t=>l(t,n)).filter(t=>null!==t))}return{e,ctx:n}})}text(t){return this.addStep((e,n)=>(d.DynValue.resolve(t,e,n).then(t=>e.textContent=t),{e,ctx:n}))}tooltip(t){return this.addStep((e,n)=>(d.DynValue.resolve(t,e,n).then(t=>e.title=t),{e,ctx:n}))}on(t,e){return this.addStep((n,o)=>(n.addEventListener(t,t=>e(t,n,o)),{e:n,ctx:o}))}once(t,e){return this.addStep((n,o)=>(n.addEventListener(t,t=>e(t,n,o),{once:!0}),{e:n,ctx:o}))}do(t){return this.addStep((e,n)=>(t(e,n),{e,ctx:n}))}apply(t={}){const e={...this.defaultCtx,...t};return this.mold(e).e}copy(){return new d(this.mold,this.defaultCtx)}static fromTagName(t,e){return new d(e=>({e:document.createElement(t),ctx:e}),e)}}!function(t){let e;!function(t){function e(t,e,n){return"function"==typeof t?t(e,n):t}t.evaluate=e,t.resolve=function(t,n,o){return Promise.resolve(e(t,n,o))}}(e=t.DynValue||(t.DynValue={}))}(d||(d={}));const u=d,h=new DOMParser;function m(t){return fetch(`images/icons/${t}.svg`).then(t=>{if(t.ok)return t.text();throw new Error("icon SVG not found")}).then(t=>h.parseFromString(t,"image/svg+xml")).then(t=>{const e=t.firstChild;if(e instanceof SVGElement)return e.classList.add("icon"),e;throw new TypeError("invalid SVG")})}var f;!function(t){t.NORMAL="normal",t.HIGH="high"}(f||(f={}));const g=[f.NORMAL,f.HIGH];function p(t){return Object.values(f).some(e=>t===e)}f.NORMAL,function(t){const n="contrast";function o(){const e=localStorage.getItem(n);return p(e)?e:t.NORMAL}function r(t){localStorage.setItem(n,t),e.onceDOMContentLoaded().then(()=>{document.body.setAttribute("contrast",t)})}t.get=o,t.set=r,t.setNext=function(){const t=g.indexOf(o()),e=g[(t+1)%g.length];return r(e),e};const c=localStorage.getItem(n);p(c)?r(c):matchMedia("(prefers-contrast: more)").matches?r(t.HIGH):r(t.NORMAL)}(f||(f={}));const E=f;var L;!function(t){t.NORMAL="normal",t.REDUCED="reduced"}(L||(L={}));const D=[L.NORMAL,L.REDUCED];function A(t){return Object.values(L).some(e=>t===e)}L.NORMAL,function(t){const n="motion";function o(){const e=localStorage.getItem(n);return A(e)?e:t.NORMAL}function r(t){localStorage.setItem(n,t),e.onceDOMContentLoaded().then(()=>{document.body.setAttribute("motion",t)})}t.get=o,t.set=r,t.setNext=function(){const t=D.indexOf(o()),e=D[(t+1)%D.length];return r(e),e};const c=localStorage.getItem(n);A(c)?r(c):matchMedia("(prefers-reduced-motion: reduce)").matches?r(t.REDUCED):r(t.NORMAL)}(L||(L={}));const T=L,v={[s.DEFAULT_LIGHT]:"light-mode",[s.DEFAULT_DARK]:"dark-mode",[s.PLANT]:"nature",[s.SARDINE]:"set-meal",[s.FILMSTRIP]:"theaters",[s.HEART]:"heart-smile"},O={[E.NORMAL]:"contrast",[E.HIGH]:"contrast-circle"},S={[T.NORMAL]:"trail-length",[T.REDUCED]:"trail-length-short"};Promise.all([(async()=>u.fromTagName("header",{}).class("flex-columns").children(u.fromTagName("h1",{}).id("logo").text("Guess Some Words"),u.fromTagName("div",{}).id("settings-dropdown").class("flex","rows").children(m("settings"),u.fromTagName("button",{}).id("color-palette-button").tooltip("Color Palette").children(m(v[s.get()])).on("click",(t,e)=>{const n=s.setNext();m(v[n]).then(t=>e.firstChild?.replaceWith(t))}),u.fromTagName("button",{}).id("high-contrast-button").tooltip("Contrast").children(m(O[E.get()])).on("click",(t,e)=>{const n=E.setNext();m(O[n]).then(t=>e.firstChild?.replaceWith(t))}),u.fromTagName("button",{}).id("reduced-button").tooltip("Reduced Motion").children(m(S[T.get()])).on("click",(t,e)=>{const n=T.setNext();m(S[n]).then(t=>e.firstChild?.replaceWith(t))})).on("mouseenter",(t,e)=>{o.canHover()&&(e.toggleAttribute("open",!0),e.style.setProperty("--target-height",`${e.scrollHeight}px`))}).on("mouseleave",(t,e)=>{o.canHover()&&e.toggleAttribute("open",!1)}).on("click",(t,e)=>{o.canHover()||(e.toggleAttribute("open"),e.style.setProperty("--target-height",`${e.scrollHeight}px`))})).apply())(),(async()=>u.fromTagName("footer",{}).class("flex","columns").children(u.fromTagName("p",{}).text("Made by"),u.fromTagName("a",{}).text("THSlimes").attr("href","https://github.com/THSlimes")).apply())(),e.onceDOMContentLoaded()]).then(([t,e])=>{document.body.prepend(t),document.body.append(e)}),console.log("hi")})();